{% extends 'base/base.html' %}
{% load staticfiles %}
{% block title %}吕奉先:)文章详情{% endblock %}
{% block link %}
    <link rel="stylesheet" href="{% static 'css/blog.css' %}"/>
    <!-- 引入monikai.css -->
    <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}"/>
    <link rel="stylesheet" href="{% static 'css/monokai.css' %}">
    {#    <link rel="stylesheet" href="{% static 'css/aplayer.css' %}"/>#}
{% endblock %}

<!-- 预留具体页面的位置 -->
{% block main %}
    <div class="container-fixed">
    <div class="col-content" style="width:100%">
        <div class="inner">
            <div class="article-list">
                <input type="hidden" value="@Model.BlogTypeID" id="blogtypeid"/>
                <div class="article-item">
                    <aside class="title" style="line-height:1.5;">
                        <h4>{{ article.title }}</h4>
                        <p class="fc-grey fs-14">
                            <small>
                                作者：<a href="https://wpa.qq.com/msgrd?v=3&uin=1105067343&site=qq&menu=yes"
                                      target="_blank" class="fc-link">吕奉先</a>
                            </small>
                            <small class="ml10">围观群众：<i class="readcount">{{ article.views }}</i></small>
                            <small class="ml10">更新于 <label>{{ article.update_time }}</label></small>
                        </p>
                    </aside>
                    <div class="time mt10" style="padding-bottom:0;">
                        <span class="day">{{ article.create_time | date:'j' }}</span>
                        <span class="month fs-18">{{ article.create_time | date:'n' }}
                                <small class="fs-14">月</small></span>
                        <span class="year fs-18">{{ article.create_time | date:'Y' }}</span>
                    </div>

                    <div class="content"
                         style="border-bottom: 1px solid #e1e2e0; padding-bottom: 20px;">
                        <h6 style="border-left:3px solid #1e9fff">文章正文</h6>
                        {{ article.content |safe }}

                        <div class="copyright mt20">
                            <p class="f-toe fc-black">
                                如无特殊说明，文章均为本站原创，转载请注明出处
                            </p>
                            <p class="f-toe">
                                本文标题：
                                <a href="javascript:void(0)" class="r-title">{{ article.title }}</a>
                            </p>
                            <p class="f-toe">
                                本文网址：
                                <a href="javascript:void(0)">{{ request.build_absolute_uri }}</a>
                            </p>
                        </div>
                        <div id="aplayer" style="margin:5px 0"></div>
                        <h6>延伸阅读</h6>
                        <ol class="b-relation">
                            <li class="f-toe">上一篇:<a href="#">没有了</a></li>
                            <li class="f-toe">下一篇:<a href="#">没有了</a></li>
                        </ol>
                    </div>
                    <div class="article-action" style="margin-top: 30px;
    margin-bottom: 30px;
    text-align: center;">
                        <div class="btn-zan" data-id="245" style=""><i class="fa fa-thumbs-up" aria-hidden="true"></i> 赞
                            <span class="article-action-num">(17)</span></div>
                        <div class="btn-dashang"><i class="fa fa-jpy" aria-hidden="true"></i> 打赏 <span
                                class="dashang-img"><span><img src="/images/dashang.jpg"
                                                               alt="微信扫一扫"> 微信扫码打赏</span></span>
                        </div>
                    </div>
                    <div class="f-cb"></div>
                    <div class="mt20 f-fwn fs-24 fc-grey comment">
                    </div>
                    <div class="content" style="min-height: 0px;">
                        <h6 style="border-left:3px solid #f44336">评论</h6>
                    </div>
                    <div class="container-fixed" style="width: 1220px;">
                        <div class="container-inner">
                            <div class="textarea-wrap message" id="textarea-wrap">
                                {% if user.is_authenticated %}
                                    <form class="layui-form blog-editor" action="" method="post">
                                        {% csrf_token %}
                                        <div>
                                                    <textarea name="content" lay-verify="content" id="remarkEditor"
                                                              placeholder="请输入内容"
                                                              class="layui-textarea layui-hide"></textarea>
                                            {#                            {{ message_form.media }}#}
                                            {#                            {{ message_form.content }}#}
                                        </div>
                                        <div class="layui-form-item" style="margin-top: 10px;
    margin-bottom: 0px;">
                                            <button class="layui-btn" lay-submit="formLeaveMessage"
                                                    lay-filter="formLeaveMessage">提交
                                            </button>
                                        </div>
                                    </form>
                                {% else %}
                                    <h1 style="text-align:center;margin: 10px">请<a style="color: #9c27b0"
                                                                                   href="{% url 'user:login' %}?next=
{% url 'user:message' %}">登录</a>后留言
                                    </h1>
                                {% endif %}
                            </div>
                        </div>

                    </div>
                    <div class="f-cb"></div>
                    <div class="mt20">
                        {#            <h4 style="text-align: center;background-color: #fff;padding: 5px;">共有{{ messages_list.count }}条留言</h4>#}
                        <ul class="message-list" id="message-list">
                            {% for message in messages %}
                                <li class="zoomIn article">
                                    <div class="comment-parent">
                                        <a name="remark-1"></a>
                                        <img src="{{ message.author.user_image_url }}"/>
                                        <div class="info">
                                            <span class="username">{{ message.author.username }}</span>
                                            {% if message.author.is_superuser %}
                                                <span style="display: inline-block;padding: 0 5px;margin-right: 10px;color: #fff;background: #9c27b0;border-radius: 3px;font-size: 12px;">站长</span>
                                            {% endif %}
                                            {#                                <span style="color: #a93838">{{ request.META.HTTP_USER_AGENT }}</span>#}
                                        </div>
                                        <div class="comment-content">
                                            {{ message.content|safe }}
                                        </div>
                                        <p class="info info-footer">
                                            <i class="fa fa-map-marker" aria-hidden="true"></i>
                                            {#                                <p>{{ request.META.HTTP_X_FORWARDED_FOR }}</p>#}
                                            {#                            {{ request.META.REMOTE_ADDR }}#}
                                            {#                                {{ request.META }}     获取请求信息     #}
                                            <span>{{ message.addr }}</span>
                                            <span class="comment-time">{{ message.create_time|date:"Y-m-d H:i:s" }}</span>
                                            {% if user.is_authenticated %}
                                                <a href="javascript:;" class="btn-reply" data-targetid="1"
                                                   data-targetname="{{ message.author.username }}">回复</a>
                                            {% else %}
                                            {% endif %}
                                        </p>
                                    </div>
                                    <hr/>
                                    <div class="comment-child">
                                        <a name="reply-1"></a>
                                        <img src="https://thirdqq.qlogo.cn/qqapp/101465933/7627F745B95BFAC18C6C481FE72B4EB1/100">
                                        <div class="info">
                                            <span class="username">燕十四</span>
                                            {#                                {% if message.author.is_superuser %}#}
                                            {#                                    <span style="display: inline-block;padding: 0 5px;margin-right: 10px;color: #fff;background: #9c27b0;border-radius: 3px;font-size: 12px;">站长</span>#}
                                            {#                                {% endif %}#}
                                            <span style="padding-right:0;margin-left:-5px;">回复</span>
                                            <span class="username">燕十三</span>
                                            {#                                {% if message.author.is_superuser %}#}
                                            {#                                    <span style="display: inline-block;padding: 0 5px;margin-right: 10px;color: #fff;background: #9c27b0;border-radius: 3px;font-size: 12px;">站长</span>#}
                                            {#                                {% endif %}#}
                                            <span>一剑光寒十九洲</span>
                                        </div>
                                        <p class="info">
                                            <i class="fa fa-map-marker" aria-hidden="true"></i>
                                            <span>四川</span>
                                            <span class="comment-time">2018-01-01</span>
                                            {% if user.is_authenticated %}
                                                <a href="javascript:;" class="btn-reply" data-targetid="2"
                                                   data-targetname="燕十四">回复</a>
                                                {#                                {% else %}#}
                                            {% endif %}
                                        </p>
                                    </div>
                                    <div class="replycontainer layui-hide">
                                        <form class="layui-form" action="" method="post">
                                            {% csrf_token %}
                                            <input type="hidden" name="remarkId" value="1">
                                            <input type="hidden" name="targetUserId" value="0">
                                            <div class="layui-form-item">
                                <textarea name="replyContent" lay-verify="replyContent" placeholder="请输入回复内容"
                                          class="layui-textarea" style="min-height:80px;"></textarea>
                                            </div>
                                            <div class="layui-form-item">
                                                <button class="layui-btn layui-btn-xs" lay-submit="formReply"
                                                        lay-filter="formReply">
                                                    提交
                                                </button>
                                            </div>
                                        </form>
                                    </div>
                                </li>
                            {% endfor %}
                        </ul>
                        {# 实现分页标签的代码 #}
                        {# 这里使用 bootstrap 渲染页面 #}
                        <div id="pages" class="text-center">
                            <nav>
                                <ul class="pagination">
                                    <li>
                                        {% if messages.has_previous %}
                                            <a class='active' href="?page={{ messages.previous_page_number }}">上一页</a>
                                        {% endif %}

                                        <span>
                    Page {{ messages.number }} of {{ messages.paginator.num_pages }}</span>

                                        {% if messages.has_next %}
                                            <a class='active' href="?page={{ messages.next_page_number }}">下一页</a>
                                        {% endif %}
                                    </li>
                                </ul>
                            </nav>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
{% endblock main %}
{% block script %}
    <script src="{% static 'js/yss/article.js' %}"></script>
    <script src="{% static 'js/pagemessage.js' %}"></script>
{% endblock %}


<!-- container end -->


